<UserControl x:Class="IronSight.App.UI.Views.SettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="700" d:DesignWidth="800">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <ScrollViewer.Resources>
            <Style TargetType="ScrollBar" BasedOn="{StaticResource FluentScrollBar}"/>
        </ScrollViewer.Resources>
        
        <StackPanel Margin="0,0,0,20">
            <!-- 页面标题 -->
            <StackPanel Margin="0,0,0,32">
                <TextBlock Text="设置" Style="{StaticResource PageTitle}"/>
                <TextBlock Text="配置您的 IronSight 工作环境" Style="{StaticResource PageSubtitle}"/>
            </StackPanel>

            <!-- 通用设置组 -->
            <TextBlock Text="通用设置" 
                       Foreground="{StaticResource AccentBrush}" 
                       FontWeight="SemiBold" 
                       FontSize="13"
                       Margin="0,0,0,12"/>
            <Border Style="{StaticResource FluentCard}" Margin="0,0,0,24">
                <StackPanel>
                    <!-- 语言选择 -->
                    <Grid Margin="0,0,0,16">
                        <StackPanel>
                            <TextBlock Text="显示语言 (Language)" 
                                       Foreground="{StaticResource TextPrimary}" 
                                       FontWeight="Medium"/>
                            <TextBlock Text="更改界面的主要显示语言" 
                                       Foreground="{StaticResource TextTertiary}" 
                                       FontSize="12"
                                       Margin="0,4,0,0"/>
                        </StackPanel>
                        <ComboBox HorizontalAlignment="Right" 
                                  Width="150" 
                                  Height="36"
                                  Style="{StaticResource FluentComboBox}">
                            <ComboBoxItem Content="简体中文" IsSelected="True" Style="{StaticResource FluentComboBoxItem}"/>
                            <ComboBoxItem Content="English" Style="{StaticResource FluentComboBoxItem}"/>
                        </ComboBox>
                    </Grid>

                    <Separator Style="{StaticResource FluentSeparator}" Margin="0,0,0,16"/>

                    <!-- 主题模式 -->
                    <Grid>
                        <StackPanel>
                            <TextBlock Text="主题模式" 
                                       Foreground="{StaticResource TextPrimary}" 
                                       FontWeight="Medium"/>
                            <TextBlock Text="跟随系统或手动指定主题" 
                                       Foreground="{StaticResource TextTertiary}" 
                                       FontSize="12"
                                       Margin="0,4,0,0"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                            <RadioButton Content="浅色" 
                                         Foreground="{StaticResource TextSecondary}" 
                                         Margin="0,0,16,0" 
                                         VerticalAlignment="Center"/>
                            <RadioButton Content="深色" 
                                         Foreground="{StaticResource TextSecondary}" 
                                         IsChecked="True" 
                                         Margin="0,0,16,0"
                                         VerticalAlignment="Center"/>
                            <RadioButton Content="系统" 
                                         Foreground="{StaticResource TextSecondary}" 
                                         VerticalAlignment="Center"/>
                        </StackPanel>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- 性能设置组 -->
            <TextBlock Text="性能与采样" 
                       Foreground="#A855F7" 
                       FontWeight="SemiBold" 
                       FontSize="13"
                       Margin="0,0,0,12"/>
            <Border Style="{StaticResource FluentCard}" Margin="0,0,0,24">
                <StackPanel>
                    <!-- 采样频率 -->
                    <Grid Margin="0,0,0,16">
                        <StackPanel>
                            <TextBlock Text="数据采样频率 (ms)" 
                                       Foreground="{StaticResource TextPrimary}" 
                                       FontWeight="Medium"/>
                            <TextBlock Text="更短的周期意味着更高的 CPU 消耗" 
                                       Foreground="{StaticResource TextTertiary}" 
                                       FontSize="12"
                                       Margin="0,4,0,0"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                            <Slider Width="200" 
                                    Minimum="100" 
                                    Maximum="5000" 
                                    Value="1000" 
                                    Style="{StaticResource FluentSlider}"
                                    VerticalAlignment="Center" 
                                    x:Name="FreqSlider"/>
                            <TextBlock Text="{Binding ElementName=FreqSlider, Path=Value, StringFormat={}{0:0}ms}" 
                                       Foreground="#A855F7" 
                                       Width="60" 
                                       Margin="12,0,0,0" 
                                       VerticalAlignment="Center" 
                                       FontWeight="SemiBold"/>
                        </StackPanel>
                    </Grid>

                    <Separator Style="{StaticResource FluentSeparator}" Margin="0,0,0,16"/>

                    <!-- 开机启动 -->
                    <Grid>
                        <StackPanel>
                            <TextBlock Text="开机启动" 
                                       Foreground="{StaticResource TextPrimary}" 
                                       FontWeight="Medium"/>
                            <TextBlock Text="在 Windows 登录时自动启动监控" 
                                       Foreground="{StaticResource TextTertiary}" 
                                       FontSize="12"
                                       Margin="0,4,0,0"/>
                        </StackPanel>
                        <CheckBox HorizontalAlignment="Right" 
                                  VerticalAlignment="Center" 
                                  Style="{StaticResource FluentCheckBox}"/>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- 数据管理 -->
            <TextBlock Text="数据管理" 
                       Foreground="{StaticResource WarningBrush}" 
                       FontWeight="SemiBold" 
                       FontSize="13"
                       Margin="0,0,0,12"/>
            <Border Style="{StaticResource FluentCard}" Margin="0,0,0,32">
                <StackPanel>
                    <TextBlock Text="由于 IronSight 采用 ElementRuntime 高性能架构，原始网络封包在内存中按环形缓冲区存储。" 
                               Foreground="{StaticResource TextSecondary}" 
                               FontSize="13" 
                               TextWrapping="Wrap" 
                               LineHeight="22"
                               Margin="0,0,0,16"/>
                    <Button Style="{StaticResource DangerButton}" 
                            HorizontalAlignment="Left">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="&#xE74D;" 
                                       FontFamily="Segoe Fluent Icons" 
                                       Margin="0,0,8,0" 
                                       VerticalAlignment="Center"/>
                            <TextBlock Text="立即清除历史流量统计"/>
                        </StackPanel>
                    </Button>
                </StackPanel>
            </Border>

            <!-- 底部操作 -->
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Content="重置默认值" 
                        Style="{StaticResource SecondaryButton}" 
                        Margin="0,0,12,0"/>
                <Button Content="保存并应用" 
                        Style="{StaticResource PrimaryButton}"/>
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
</UserControl>